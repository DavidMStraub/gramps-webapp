let t,e,i,a,s,n,p,r,h,m,_,l,o,c=t=>t;import{c as d,s as g,h as $,t as y,S as v}from"./8144a6f8.js";import{P as f}from"./373bcc3c.js";import"./8e695940.js";import"./397b2068.js";import"./03029a4d.js";import"./5800f810.js";import"./cdf40cfd.js";import"./4dd71483.js";class u extends(d(g)(f)){render(){return null==this._event?$(t||(t=c``)):$(e||(e=c` <style>div.item{float:left;margin:5px}svg{height:1em;top:.125em;position:relative}svg path{fill:#aaa}th{color:#777;font-size:.75em;font-weight:500;text-align:right;max-width:20em;padding-right:1em}td{margin:0}</style> <section> <div id="title"> <h2>${0}: ${0} ${0} </h2> </div> <p> <table width="100%"> ${0} ${0} ${0} </table> </p> <p>${0}</p> ${0} <gr-gallery-element .images="${0}" token="${0}"> </gr-gallery-element> ${0} ${0} ${0} <gr-citations-element .citations="${0}"> </gr-citations-element> </section> `),this._event.type,this._participants[y("Primary")]?$(i||(i=c` ${0} `),this._participants[y("Primary")].map((t,e,i)=>this._participantLink(t,e==i.length-1))):"",this._participants[y("Family")]?$(a||(a=c` ${0} `),this._participants[y("Family")].map((t,e,i)=>this._participantLink(t,e==i.length-1))):"",this._event.date?$(s||(s=c` <tr> <th>${0}</th> <td>${0}</td> </tr> `),y("Date"),this._event.date):"",this._event.place?$(n||(n=c` <tr> <th>${0}</th> <td><a href="/place/${0}">${0}</a></td> </tr> `),y("Place"),this._event.place,this._event.place_name):"",Object.keys(this._participants).map(t=>{if(t!=y("Primary")&&t!=y("Family"))return $(p||(p=c` <tr> <th>${0}</th> <td>${0}</td> </tr> `),t,this._participants[t].map((t,e,i)=>this._participantLink(t,e==i.length-1)))}),this._event.description,this._media.length?$(r||(r=c`<h3>${0}</h3>`),y("Media")):"",this._media,this._token,this._notes.length?$(h||(h=c`<h3>${0}</h3>`),y("Notes")):"",this._notes.map(t=>$(m||(m=c` <gr-note-element grampsid="${0}"> </gr-note-element> `),t)),this._citations.length?$(_||(_=c`<h3>${0}</h3>`),y("Sources")):"",this._citations)}static get styles(){return[v]}constructor(){super(),this._media=Array()}static get properties(){return{_event:{type:Object},_handle:{type:String},_token:{type:String},_media:{type:Object}}}firstUpdated(){}_participantLink(t,e){return null==t?"":"Person"==t.type?$(l||(l=c` <a href="/person/${0}">${0} ${0}</a>${0} `),t.person.gramps_id,t.person.name_given,t.person.name_surname,e?"":", "):"Family"==t.type?$(o||(o=c` <a href="/person/${0}">${0}</a> ${0} <a href="/person/${0}">${0}</a>${0} `),t.family.father_id,t.family.father_name,y("and"),t.family.mother_id,t.family.mother_name,e?"":", "):void 0}_addMimeType(t,e){return t.map((function(t){return t.mime=e.api.media[t.ref].mime,t}))}stateChanged(t){this._token=t.api.token,this._gramps_id=t.app.activeEvent,this._event=t.api.events[this._gramps_id],null!=this._event&&(""!=this._event.place&&null!=t.api.places[this._event.place]&&(this._event.place_name=t.api.places[this._event.place].name),this._media=this._addMimeType(this._event.media,t),this._citations=this._event.citations,this._notes=this._event.notes,this._participants=Object.assign({},this._event.participants),Object.keys(this._participants).map(e=>{this._participants[e]=this._participants[e].map((function(e){return"Person"==e.type?{type:e.type,person:t.api.people[e.gramps_id]}:"Family"==e.type?{type:e.type,family:t.api.families[e.gramps_id]}:void 0}))}))}}window.customElements.define("gr-view-event",u);
